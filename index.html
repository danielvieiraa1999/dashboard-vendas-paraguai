<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Dashboard de Vendas - Paraguai</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        background: #f4f6f8;
    }

    header {
        background: linear-gradient(90deg, #d52b1e, #ffffff, #0038a8);
        padding: 20px;
        text-align: center;
        font-size: 24px;
        font-weight: bold;
    }

    .container {
        padding: 20px;
    }

    .cards {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 15px;
        margin-bottom: 20px;
    }

    .card {
        background: white;
        padding: 15px;
        border-radius: 10px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        text-align: center;
    }

    .card h3 {
        margin: 5px 0;
        font-size: 16px;
        color: #555;
    }

    .card span {
        font-size: 24px;
        font-weight: bold;
    }

    .forms {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin-bottom: 20px;
    }

    form {
        background: white;
        padding: 15px;
        border-radius: 10px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    form h3 {
        margin-top: 0;
    }

    input, button {
        width: 100%;
        padding: 8px;
        margin-top: 8px;
    }

    button {
        background: #0038a8;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }

    button:hover {
        background: #002b82;
    }

    .charts {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 20px;
    }

    .chart-box {
        background: white;
        padding: 15px;
        border-radius: 10px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
</style>
</head>

<body>

<header>
    Dashboard de Controle de Vendas ðŸ‡µðŸ‡¾
</header>

<div class="container">

    <!-- INDICADORES -->
    <div class="cards">
        <div class="card">
            <h3>Faturamento</h3>
            <span id="totalVendas">R$ 0,00</span>
        </div>
        <div class="card">
            <h3>Despesas</h3>
            <span id="totalDespesas">R$ 0,00</span>
        </div>
        <div class="card">
            <h3>Lucro</h3>
            <span id="lucro">R$ 0,00</span>
        </div>
    </div>

    <!-- FORMULÃRIOS -->
    <div class="forms">
        <form id="formVenda">
            <h3>Adicionar Venda</h3>
            <input type="text" id="produto" placeholder="Produto" required>
            <input type="number" id="valorVenda" placeholder="Valor da Venda" required>
            <input type="date" id="dataVenda" required>
            <button type="submit">Adicionar Venda</button>
        </form>

        <form id="formDespesa">
            <h3>Adicionar Despesa</h3>
            <input type="text" id="descricaoDespesa" placeholder="DescriÃ§Ã£o" required>
            <input type="number" id="valorDespesa" placeholder="Valor da Despesa" required>
            <input type="date" id="dataDespesa" required>
            <button type="submit">Adicionar Despesa</button>
        </form>
    </div>

    <!-- GRÃFICOS -->
    <div class="charts">
        <div class="chart-box">
            <canvas id="graficoProdutos"></canvas>
        </div>
        <div class="chart-box">
            <canvas id="graficoResumo"></canvas>
        </div>
    </div>

</div>

<script>
let vendas = JSON.parse(localStorage.getItem("vendas")) || [];
let despesas = JSON.parse(localStorage.getItem("despesas")) || [];

const ctxProdutos = document.getElementById("graficoProdutos");
const ctxResumo = document.getElementById("graficoResumo");

let graficoProdutos = new Chart(ctxProdutos, {
    type: 'bar',
    data: { labels: [], datasets: [{ label: 'Vendas por Produto', data: [], backgroundColor: '#d52b1e' }] }
});

let graficoResumo = new Chart(ctxResumo, {
    type: 'pie',
    data: {
        labels: ['Faturamento', 'Despesas'],
        datasets: [{ data: [0,0], backgroundColor: ['#0038a8','#d52b1e'] }]
    }
});

function atualizarDashboard() {
    const totalV = vendas.reduce((s,v) => s + v.valor, 0);
    const totalD = despesas.reduce((s,d) => s + d.valor, 0);
    const lucro = totalV - totalD;

    document.getElementById("totalVendas").innerText = `R$ ${totalV.toFixed(2)}`;
    document.getElementById("totalDespesas").innerText = `R$ ${totalD.toFixed(2)}`;
    document.getElementById("lucro").innerText = `R$ ${lucro.toFixed(2)}`;

    let produtos = {};
    vendas.forEach(v => produtos[v.produto] = (produtos[v.produto] || 0) + v.valor);

    graficoProdutos.data.labels = Object.keys(produtos);
    graficoProdutos.data.datasets[0].data = Object.values(produtos);
    graficoProdutos.update();

    graficoResumo.data.datasets[0].data = [totalV, totalD];
    graficoResumo.update();

    localStorage.setItem("vendas", JSON.stringify(vendas));
    localStorage.setItem("despesas", JSON.stringify(despesas));
}

document.getElementById("formVenda").addEventListener("submit", e => {
    e.preventDefault();
    vendas.push({
        produto: produto.value,
        valor: Number(valorVenda.value),
        data: dataVenda.value
    });
    e.target.reset();
    atualizarDashboard();
});

document.getElementById("formDespesa").addEventListener("submit", e => {
    e.preventDefault();
    despesas.push({
        descricao: descricaoDespesa.value,
        valor: Number(valorDespesa.value),
        data: dataDespesa.value
    });
    e.target.reset();
    atualizarDashboard();
});

atualizarDashboard();
</script>

</body>
</html>
